<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Making Dot Density Maps â€¢ dots</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Making Dot Density Maps">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dots</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/making_dot_density_maps.html">Making Dot Density Maps</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/christopherkenny/dots/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Making Dot Density Maps</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/christopherkenny/dots/blob/v0.0.2/vignettes/making_dot_density_maps.Rmd" class="external-link"><code>vignettes/making_dot_density_maps.Rmd</code></a></small>
      <div class="d-none name"><code>making_dot_density_maps.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/christopherkenny/dots" class="external-link">dots</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE</span></span></code></pre></div>
<div class="section level2">
<h2 id="the-dots-package">The <code>dots</code> Package<a class="anchor" aria-label="anchor" href="#the-dots-package"></a>
</h2>
<p>Dot density maps are useful to display the relative distribution of
people across geographies. These maps are often used in election
research and litigation to highlight the distribution of voters where
choropleths tell a different story. <code>dots</code> simplifies this
process, allowing for a tidy, simple interface. Maps can be created
automatically with <code><a href="../reference/dots.html">dots::dots()</a></code>. The points behind these
maps can be generated with <code><a href="../reference/dots_points.html">dots::dots_points()</a></code>.</p>
<p>Now, various methods for creating random points exist in different R
ecosystems, notably in <code>terra</code>, <code>sf</code>, and
<code>sp</code>. Each of these different inputs and produce completely
different outputs. To standardize these to one interface,
<code>dots</code> creates a set of wrapper <code>engine_*</code>
functions. Each <code>engine_*</code> function takes the same arguments:
<code>shp</code> and <code>col</code>. Shape is an <code>sf</code>
tibble and <code>col</code> is the string name of a column in
<code>shp</code>. Within each of the engine functions, additional work
is done to standardize the outputs so that they will be largely
comparable.</p>
</div>
<div class="section level2">
<h2 id="making-dot-density-maps">Making Dot Density Maps<a class="anchor" aria-label="anchor" href="#making-dot-density-maps"></a>
</h2>
<p>To make a dot density map, we need a shapefile with populations,
votes, or some other numeric attribute tied to each geography. Here, we
load 2020 Census data for Suffolk County, MA, included with the
<code>dots</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"suffolk"</span><span class="op">)</span></span></code></pre></div>
<p>To make a basic dot density map for the Hispanic voting age
population, we can run the following:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dots</span><span class="fu">::</span><span class="fu"><a href="../reference/dots.html">dots</a></span><span class="op">(</span>shp <span class="op">=</span> <span class="va">suffolk</span>, cols <span class="op">=</span> <span class="va">vap_hisp</span><span class="op">)</span></span></code></pre></div>
<p>This works because <code>vap_hisp</code> is a numeric column in
<code>suffolk</code>. Any numeric column would work. We can even use
multiple columns. <code>cols</code> uses <code>tidyselect</code> to
select multiple columns. For example, to make a map using the White and
Hispanic voting age population, we could do the following:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dots</span><span class="fu">::</span><span class="fu"><a href="../reference/dots.html">dots</a></span><span class="op">(</span>shp <span class="op">=</span> <span class="va">suffolk</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vap_hisp</span>, <span class="va">vap_white</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now, the points here are a bit crowded, so we can raise the number of
adults that each point stands for by increasing the <code>divisor</code>
argument. The default is 250, but here we will raise it to 1250.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dots</span><span class="fu">::</span><span class="fu"><a href="../reference/dots.html">dots</a></span><span class="op">(</span>shp <span class="op">=</span> <span class="va">suffolk</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vap_hisp</span>, <span class="va">vap_white</span><span class="op">)</span>, divisor <span class="op">=</span> <span class="fl">1250</span><span class="op">)</span></span></code></pre></div>
<p>The color of the dots uses the color aesthetic, so we can change it
using different <code>scale_color</code> functions:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dots</span><span class="fu">::</span><span class="fu"><a href="../reference/dots.html">dots</a></span><span class="op">(</span>shp <span class="op">=</span> <span class="va">suffolk</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vap_hisp</span>, <span class="va">vap_white</span><span class="op">)</span>, divisor <span class="op">=</span> <span class="fl">1250</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">'Race/Ethnicity'</span>, palette <span class="op">=</span> <span class="st">'Accent'</span><span class="op">)</span></span></code></pre></div>
<p>Now, this is kind of bland, but it is a <code>ggplot</code> output,
so we can update it using any of the regular tools. For example, we can
clean up the background and give it clearer labels.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dots</span><span class="fu">::</span><span class="fu"><a href="../reference/dots.html">dots</a></span><span class="op">(</span>shp <span class="op">=</span> <span class="va">suffolk</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vap_hisp</span>, <span class="va">vap_white</span><span class="op">)</span>, divisor <span class="op">=</span> <span class="fl">1250</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">'Race/Ethnicity'</span>, palette <span class="op">=</span> <span class="st">'Accent'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">'White and Hispanic Adults in Suffolk County, MA'</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">'One point per 1250 adults.'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The downside of using the automatic plot generated by
<code><a href="../reference/dots.html">dots::dots()</a></code> is that it limits us to a few plot defaults.
If we switch to <code><a href="../reference/dots_points.html">dots::dots_points()</a></code>, we can make more
specific choices by generating the plot.</p>
<p>To make the same basic plot, we could run the following:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dots</span><span class="fu">::</span><span class="fu"><a href="../reference/dots_points.html">dots_points</a></span><span class="op">(</span>shp <span class="op">=</span> <span class="va">suffolk</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vap_hisp</span>, <span class="va">vap_white</span><span class="op">)</span>, divisor <span class="op">=</span> <span class="fl">1250</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">suffolk</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">dots_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">'Race/Ethnicity'</span>, palette <span class="op">=</span> <span class="st">'Accent'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">'White and Hispanic Adults in Suffolk County, MA'</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">'One point per 1250 adults.'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Then, we can customize additional aspects of it, again using
<code>ggplot2</code> functions.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dots</span><span class="fu">::</span><span class="fu"><a href="../reference/dots_points.html">dots_points</a></span><span class="op">(</span>shp <span class="op">=</span> <span class="va">suffolk</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vap_hisp</span>, <span class="va">vap_white</span><span class="op">)</span>, divisor <span class="op">=</span> <span class="fl">1250</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dots_type <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">dots_type</span> <span class="op">==</span> <span class="st">'vap_white'</span> <span class="op">~</span> <span class="st">'White'</span>,</span>
<span>    <span class="va">dots_type</span> <span class="op">==</span> <span class="st">'vap_hisp'</span> <span class="op">~</span> <span class="st">'Hispanic'</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">suffolk</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">dots_type</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span> <span class="op">+</span> <span class="co"># change size</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">'Race/Ethnicity'</span>, palette <span class="op">=</span> <span class="st">'Accent'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">'White and Hispanic Adults in Suffolk County, MA'</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">'One point per 1250 adults.'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher T. Kenny.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
